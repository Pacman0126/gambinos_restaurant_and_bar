{# templates/reservation_book/user_reservation_history.html #}
{% extends "base.html" %}

{% block content %}
<h1>Reservation History for {{ history_user.get_full_name|default:history_user.username }}</h1>
<p>Email: {{ history_user.email }}</p>

<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>Date</th>
      <th>Time Slot</th>
      <th>Tables</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    {% for r in reservations %}
      <tr>
        <td>{{ r.timeslot_availability.calendar_date }}</td>
        <td>{{ r.time_slot }}</td>
        <td>{{ r.number_of_tables_required_by_patron }}</td>
        <td>
          {% if r.reservation_status %}
            <span class="badge bg-success">Active</span>
          {% else %}
            <span class="badge bg-secondary">Cancelled</span>
          {% endif %}
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="4">No reservations found for this user.</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<a href="{% url 'user_reservations_overview' %}" class="btn btn-secondary">
  Back to overview
</a>
{% endblock %}
